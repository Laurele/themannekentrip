var app={Models:{},Collections:{},Views:{Navigation:{},Background:{},Gallery:{}},Dispatcher:{}};app.Dispatcher=_.extend({},Backbone.Events),function(){this.ScrollBar=function(t){this.$selector=t,this.axis=this.$selector.data("scrollbar")||"y"},ScrollBar.prototype.render=function(){var t={};"y"===this.axis&&(t.suppressScrollX=1),"x"===this.axis&&(t.suppressScrollY=1),this.$selector.perfectScrollbar(t)},ScrollBar.prototype.update=function(){this.$selector.perfectScrollbar("update")},$(document).ready(function(){"use strict";$("[data-scrollbar]").each(function(t,i){var e=new ScrollBar($(i));e.render(),console.log('ScrollBar rendered for [class="'+$(i).attr("class")+'"]'),$(window).resize(function(){e.update()})})})}(),$(function(){"use strict";var t=$('[data-view="gallery"]'),i="[data-thumbnail]",e="[data-slideshow]",a="[data-navigation]",n="is-active";if(app.Views.Gallery=Backbone.View.extend({el:t,count:null,currentIndex:null,images:{},$slideshow:null,arrowLeftKeyCode:37,arrowRightKeyCode:39,escapeKeyCode:27,initialize:function(){},events:{"click [data-thumbnail]":"clickThumbnail"},clickThumbnail:function(t){t.preventDefault();var i=$(t.currentTarget);this.currentIndex=parseInt(i.attr("data-item")),null!==this.$slideshow?(this._slide(),this.$slideshow.show()):this.render()},clickNext:function(){var t=Object.keys(this.images).length;this.currentIndex=(this.currentIndex+1)%t,this._slide()},clickPrevious:function(){var t=Object.keys(this.images).length;this.currentIndex=(this.currentIndex+t-1)%t,this._slide()},clickMiniature:function(t){t.preventDefault(),this.currentIndex=parseInt($(t.currentTarget).attr("data-miniature")),this._slide()},close:function(){this.$slideshow.hide()},open:function(){this.$slideshow.show()},changeSlideWithKeyboard:function(t){var i=t.keyCode||t.which;i===this.arrowLeftKeyCode?this.clickPrevious():i===this.arrowRightKeyCode?this.clickNext():i===this.escapeKeyCode&&this.close()},_slide:function(){$("[data-image]").removeClass(n);var t=$('[data-image="'+this.currentIndex+'"]');t.addClass(n)},_appendTitle:function(t,i){t.append('<div class="my-slideshow-title">'+i.title+"</div>")},_appendCaption:function(t,i){t.append('<div class="my-slideshow-caption">'+i.caption+"</div>")},_appendPicture:function(t,i){t.append('<div class="my-slideshow-picture" style="background-image: url('+i.url+')"></div>')},_appendMiniature:function(t,i){this.$miniatures.append('<div data-miniature="'+t.attr("data-image")+'" class="my-slideshow-miniature" style="background-image: url('+i.miniature+')"></div>')},_appendSlideshow:function(){$("body").append("<div data-slideshow></div>"),this.$slideshow=$(e)},_appendNavigation:function(){this.$slideshow.append('<div data-navigation class="my-slideshow-navigation">'),this.$navigation=$(a),this.$navigation.append('<button class="my-slideshow-navigation--button icon-times" data-el="navigation-button-close"></button>'),this.$navigation.append('<button class="my-slideshow-navigation--button icon-chevron-left" data-el="navigation-button-previous"></button>'),this.$navigation.append('<button class="my-slideshow-navigation--button icon-chevron-right" data-el="navigation-button-next"></button>'),this.$navigation.append('<div class="my-slideshow-navigation--miniatures" data-el="navigation-miniatures"></div>'),this.$miniatures=$('[data-el="navigation-miniatures"]')},render:function(){return this.$thumbnails=$(i,this.$el),this.count=this.$thumbnails.length,this.count>0&&(this._appendSlideshow(),this._appendNavigation(),$.each(this.$thumbnails,_.bind(function(t,i){var e=$(i),a=parseInt(e.attr("data-item"));this.images[a]={title:e.attr("data-title"),caption:e.attr("data-caption"),url:e.attr("data-url"),miniature:e.attr("data-miniature-url")};var s=this.images[a];this.$slideshow.append('<div class="my-slideshow-image" data-image="'+a+'"></div>');var o=$('[data-image="'+a+'"]');a===this.currentIndex&&o.addClass(n),this._appendTitle(o,s),this._appendCaption(o,s),this._appendPicture(o,s),this._appendMiniature(o,s)},this)),$(document).on("click",'[data-el="navigation-button-next"]',_.bind(function(t){t.preventDefault(),this.clickNext()},this)),$(document).on("click",'[data-el="navigation-button-previous"]',_.bind(function(t){t.preventDefault(),this.clickPrevious()},this)),$(document).on("click",'[data-el="navigation-button-close"]',_.bind(function(t){t.preventDefault(),this.close()},this)),$(document).on("click","[data-miniature]",_.bind(this.clickMiniature,this)),$(document).bind("keyup",_.bind(this.changeSlideWithKeyboard,this)),this.$slideshow.show()),this}}),t.length>0){new app.Views.Gallery}}()),$(function(){"use strict";var t=$('[data-view="background.main"]'),i=[1,2,3,4],e=0;if(app.Views.Background.Main=Backbone.View.extend({el:t,initialize:function(){var t=this;this.backgroundId=e,setInterval(function(){t._changeBackground()},9e3)},events:{'click [data-el="topbar-menu-toggle"]':"toggleBackground"},_changeBackground:function(){var t=i.length,e=this.backgroundId,a=(this.backgroundId+1)%t;this.backgroundId=a,$('[data-el="item-'+i[a]+'"]',this.$el).addClass("is-visible"),setTimeout(_.bind(function(){$('[data-el="item-'+i[e]+'"]',this.$el).removeClass("is-visible")},this),150)},render:function(){return this}}),t.length>0){var a=new app.Views.Background.Main;a.render()}}()),$(function(){"use strict";var t=$('[data-view="navigation.main"]'),i='[data-el="site-aside-menu"]',e='[data-el="topbar-menu-toggle"]',a="is-visible",n="is-opened",s="is-overflow-hidden";if(app.Views.Navigation.Main=Backbone.View.extend({el:t,initialize:function(){this.$navigation=$(i,this.$el),this.$button=$(e,this.$el),this.$html=$("html")},events:{'click [data-el="topbar-menu-toggle"]':"toggleNavigation"},toggleNavigation:function(t){t.preventDefault(),this.$navigation.toggleClass(a),this.$button.toggleClass(n),this.$html.toggleClass(s)},render:function(){return this}}),t.length>0){var o=new app.Views.Navigation.Main;o.render()}}());